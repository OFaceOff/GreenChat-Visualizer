<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GreenChat Visualizer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="assets/styles/style.css">
</head>
<body class="h-screen w-screen overflow-hidden flex justify-center items-start md:items-center pt-0 md:pt-5">

    <div class="green-accent-strip"></div>

    <div class="app-window bg-white w-full h-full md:w-[1400px] md:h-[96vh] flex overflow-hidden relative z-10 md:min-w-[900px]">

        <div id="sidebar" class="sidebar w-full md:w-[400px] lg:w-[450px] border-r border-[#e9edef] flex flex-col bg-white h-full shrink-0 transition-all z-20">
            
            <div class="bg-[#f0f2f5] px-4 py-2.5 flex justify-between items-center h-[59px] shrink-0 border-r border-[#d1d7db]">
                <div class="font-bold text-[#00a884] text-lg tracking-tight select-none cursor-default">
                    GreenChat Visualizer
                </div>
                
                <div class="flex gap-2.5 items-center text-[#54656f]">
                    <input type="file" id="fileInput" accept=".txt" class="hidden" onchange="handleFileUpload(event)">
                    
                    <button onclick="document.getElementById('fileInput').click()" 
                            class="icon-btn" 
                            title="Carregar arquivo .txt (Upload)">
                        <i data-lucide="upload" class="w-[20px] h-[20px]"></i>
                    </button>
                    
                    <button class="icon-btn hidden sm:block" title="Comunidades"><i data-lucide="users" class="w-[20px] h-[20px]"></i></button>
                    <button class="icon-btn hidden sm:block" title="Status"><i data-lucide="circle-dashed" class="w-[20px] h-[20px]"></i></button>
                    <button class="icon-btn" title="Novo Chat" onclick="alert('Carregue um arquivo .txt para iniciar um novo chat visual!')"><i data-lucide="message-square-plus" class="w-[20px] h-[20px]"></i></button>
                    
                    <div class="relative">
                        <button class="icon-btn" title="Mais opções" onclick="toggleMenu()"><i data-lucide="more-vertical" class="w-[20px] h-[20px]"></i></button>
                        <div id="mainMenu" class="hidden absolute right-0 top-10 bg-white shadow-lg rounded-md py-2 w-48 border border-gray-100 z-50">
                            <button onclick="clearAllChats()" class="w-full text-left px-4 py-2 hover:bg-gray-100 text-sm text-red-600">Limpar todas as conversas</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="px-3 py-2 border-b border-[#e9edef] bg-white h-[49px] flex items-center gap-2">
                <div class="bg-[#f0f2f5] rounded-lg px-3 h-[35px] w-full flex items-center gap-4 transition-all focus-within:bg-white focus-within:shadow-sm focus-within:ring-1 focus-within:ring-[#00a884]">
                    <i data-lucide="search" class="w-[18px] h-[18px] text-[#54656f] shrink-0"></i>
                    <input type="text" id="searchInput" placeholder="Pesquisar ou começar uma nova conversa" class="bg-transparent border-none outline-none text-[14px] w-full placeholder-[#54656f] text-[#3b4a54]">
                </div>
                <button class="icon-btn" title="Filtro de conversas não lidas">
                     <i data-lucide="list-filter" class="w-[20px] h-[20px] text-[#54656f]"></i>
                </button>
            </div>

            <div id="contactList" class="flex-1 overflow-y-auto bg-white scrollbar-thin">
            </div>
        </div>

        <div id="chatArea" class="chat-area flex flex-col flex-1 bg-[#efeae2] h-full relative z-10">
            
            <div id="emptyState" class="hidden md:flex flex-col items-center justify-center h-full w-full bg-[#f0f2f5] border-b-[6px] border-[#25d366] text-center px-10 relative z-30">
                <div class="max-w-[560px] flex flex-col items-center">
                    <div class="mb-10 opacity-90 scale-110">
                         <svg viewBox="0 0 240 240" width="240" height="200" class="text-[#e9edef] fill-current">
                             <path fill="#f0f2f5" stroke="#d1d7db" stroke-width="2" d="M40,40 L200,40 L200,140 L40,140 Z" />
                             <path fill="#ffffff" d="M50,50 L190,50 L190,130 L50,130 Z" />
                             <rect x="30" y="140" width="180" height="10" rx="2" fill="#d1d7db" />
                             <path fill="#ffffff" stroke="#d1d7db" stroke-width="2" d="M160,80 L210,80 C212,80 214,82 214,84 L214,166 C214,168 212,170 210,170 L160,170 C158,170 156,168 156,166 L156,84 C156,82 158,80 160,80 Z" />
                             <circle cx="214" cy="80" r="10" fill="#25d366" />
                             <path d="M211,80 L213,82 L217,78" stroke="white" stroke-width="2" fill="none"/>
                        </svg>
                    </div>
                    <h1 class="text-[32px] font-light text-[#41525d] mb-4 mt-2">GreenChat Visualizer</h1>
                    <p class="text-[#667781] text-[14px] leading-6 mb-8">
                        Seus chats agora ficam salvos automaticamente neste navegador.<br>
                        Importe arquivos de texto exportados e navegue pelas suas memórias.
                    </p>
                    <div class="flex items-center gap-2 text-[#8696a0] text-xs absolute bottom-10">
                        <i data-lucide="lock" class="w-3 h-3"></i> Armazenamento local persistente
                    </div>
                </div>
            </div>

            <div id="chatContent" class="hidden flex-col h-full w-full relative bg-transparent">
                
                <div class="bg-[#f0f2f5] px-4 py-2.5 flex justify-between items-center h-[59px] shrink-0 border-b border-[rgba(0,0,0,0.05)] z-20 w-full absolute top-0 left-0">
                    <div class="flex items-center gap-3 overflow-hidden cursor-pointer">
                        <button onclick="closeChat()" class="md:hidden text-[#54656f] mr-1">
                            <i data-lucide="arrow-left" class="w-6 h-6"></i>
                        </button>
                        
                        <div class="w-10 h-10 rounded-full bg-gray-200 overflow-hidden shrink-0">
                            <img id="headerAvatar" src="" alt="Avatar" class="w-full h-full object-cover">
                        </div>
                        <div class="flex flex-col justify-center overflow-hidden">
                            <span id="headerName" class="text-[#111b21] font-normal text-[16px] leading-tight truncate">Nome do Contato</span>
                            <span id="headerInfo" class="text-[#667781] text-[13px] mt-0.5 truncate">dados do contato...</span>
                        </div>
                    </div>
                    <div class="flex gap-3 items-center text-[#54656f]">
                        <button class="icon-btn"><i data-lucide="search" class="w-[20px] h-[20px]"></i></button>
                        <button class="icon-btn"><i data-lucide="more-vertical" class="w-[20px] h-[20px]"></i></button>
                    </div>
                </div>

                <div id="messagesContainer" class="chat-background flex-1 overflow-y-auto p-4 md:p-9 md:px-[8%] flex flex-col gap-1 pt-[70px] pb-[10px]">
                </div>

                <div class="bg-[#f0f2f5] px-4 py-2 flex items-center gap-3 min-h-[62px] shrink-0 z-20 border-t border-[rgba(0,0,0,0.05)]">
                    <button class="icon-btn"><i data-lucide="smile" class="w-[24px] h-[24px] text-[#54656f]"></i></button>
                    <button class="icon-btn"><i data-lucide="plus" class="w-[24px] h-[24px] text-[#54656f]"></i></button>
                    
                    <div class="flex-1 bg-white rounded-lg px-4 py-2.5 mx-2 shadow-sm border border-white focus-within:border-white">
                        <input type="text" disabled placeholder="Somente leitura (arquivo importado)" class="w-full bg-transparent border-none outline-none text-[15px] text-[#3b4a54] placeholder:text-[#8696a0] cursor-not-allowed">
                    </div>
                    
                    <button class="icon-btn"><i data-lucide="mic" class="w-[24px] h-[24px] text-[#54656f]"></i></button>
                </div>
            </div>

        </div>
    </div>

    <div id="imageModal" class="fixed inset-0 z-[100] bg-black/90 hidden flex items-center justify-center p-4 transition-all duration-300 opacity-0" onclick="closeImageModal()">
        <div class="absolute top-4 right-4 z-[110] cursor-pointer text-white/70 hover:text-white bg-black/50 hover:bg-black/70 rounded-full p-2 transition-colors">
            <i data-lucide="x" class="w-6 h-6"></i>
        </div>
        
        <div class="absolute top-0 left-0 w-full h-16 bg-gradient-to-b from-black/60 to-transparent pointer-events-none"></div>

        <img id="modalImage" src="" alt="Full view" class="max-w-[95vw] max-h-[90vh] object-contain rounded-sm shadow-2xl scale-95 transition-transform duration-300 ease-out cursor-default" onclick="event.stopPropagation()">
    </div>

    <script src="assets/scripts/script.js"></script>
</body>
</html>